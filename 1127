9.9.1 question
1번
Which Direction flag setting makes 인덱스 레지스터가 메모리를 거꾸로 이동하게 하나?
문자열 명령은 DF가 0이면 앞에서 뒤로, 1이면 뒤에서 앞으로 진행한다.
정답: Direction flag = 1, DF가 세트될 때

2번
STOSW 에 repeat(prefix) 를 붙였을 때, 인덱스 레지스터에 얼마가 더해지거나 빼여지나?
STOSW 는 한 번에 word(2바이트)를 저장하고, 반복할 때마다 인덱스가 word 크기만큼 이동한다. DF=0이면 더해지고, DF=1이면 같은 값만큼 빼인다.
정답: 2가 더해지거나(DF=0), 2가 빼인다(DF=1)

3번
어떤 의미에서 CMPS 명령이 모호한가?
메모리 피연산자 둘 다 동일한 형태라서, CMPS만 보고는 어느 쪽이 기준인지·부호 있는 비교인지 없는 비교인지가 모호하다.

4번
Direction flag이 클리어(DF=0)이고 SCASB가 문자 하나를 찾았을 때, EDI는 어디를 가리키나?
DF=0이면 검색하면서 EDI가 앞으로 한 바이트씩 증가한다.
매치된 뒤에는 찾은 문자 바로 다음 바이트를 가리킨다.

5번
특정 문자를 처음 만나는 위치를 찾을 때, 어떤 repeat prefix가 가장 좋나?
“찾을 때까지 반복”이면 중간에 멈춰야 하므로, 같지 않을 때 계속 반복하는 형태가 유리하다.
정답: REPNE, REPNZ (같지 않을 때까지 반복)

6번
Str_trim 절차에서 사용되는 Direction flag 설정은?
문자열을 앞에서 뒤로 진행하며 공백을 지우므로 인덱스가 증가해야 한다.
답: DF=0

7번
Str_trim 이 JNE를 사용하는 이유는?
공백이 아닌 문자를 만나는 순간 루프를 빠져나와야 해서, 비교 결과가 같지 않을 때 다음 처리로 점프한다.

8번
Str_ucase 절차에서 대상 문자열에 숫자가 들어 있으면 어떻게 되나?
대문자로 바꾸는 범위는 문자 a~z만 해당한다.
숫자는 이 범위에 속하지 않으므로 그냥 원래 그대로 남는다.

9번
Str_length가 SCASB를 사용한다면, 어떤 repeat prefix가 가장 적절한가?
문자열 끝의 0을 만날 때까지 반복해서 비교해야 하므로, 같지 않을 동안 반복하는 prefix를 쓴다.
정답: REPNE, REPNZ SCASB

10번
Str_length가 SCASB를 사용한다면 길이는 어떻게 계산해서 반환하나?
EDI를 문자열 시작에 두고, ECX에 큰 값 넣고 REPNE SCASB로 0을 찾으면, ECX는 남은 카운트, EDI는 널 다음 위치를 가리킨다.
길이 = 처음 ECX 값 − 남은 ECX 값 − 1로 계산해서 EAX에 넣어 반환하면 된다.

11번
배열 원소가 1,024개일 때 이진 탐색에서 필요한 최대 비교 횟수는?
최대 비교 횟수는 log2(N)를 올림한 값이다.
log2(1024) = 10
답: 최대 10번

12번
Binary Search 예제의 FillArray에서 CLD로 DF를 꼭 클리어해야 하는 이유는?
문자열/메모리 이동 명령이 DF에 따라 인덱스를 증가 또는 감소시키는데, 이전 코드가 DF를 1로 바꿔 두었을 수도 있다.
FillArray는 앞으로 증가하면서 배열을 채워야 하므로 DF=0을 보장해야 한다.

13번
BinarySearch 예제에서 L2 라벨의 문장을 지워도 결과에 영향이 없는 이유는?
그 문장이 실제로는 조건에 상관없이 항상 같은 값을 유지하거나,
바로 다음에 다른 코드가 인덱스를 다시 덮어쓰기 때문에 계산 결과에 기여하지 않는 죽은 코드이기 때문이다.

14번
BinarySearch 예제에서 L4 라벨에 있는 문장은 어떻게 제거할 수 있나?
L4로 점프하는 분기들을 정리해서, L4 바로 뒤 코드와 합치거나 조건을 반대로 바꿔 한 곳으로만 떨어지게 만들면 된다.
즉, 분기 구조를 단순화해서 L4를 향한 점프를 없애고, L4 뒤 코드만 남기면 L4 라벨과 그 문장을 제거할 수 있다.




